<section class="login-wrapper">
    <div class="login-card">
        <img src="assets/logoIcono.png" alt="Autonaxe" class="login-logo" loading="lazy" />
        <h1>Crear cuenta</h1>
        <p class="login-subtitle">Empieza a gestionar tu actividad con Autonaxe</p>
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label for="fullName">Nombre completo</label>
                <div class="input-icon-wrapper">
                    <i class="material-icons-outlined">person</i>
                    <input type="text" id="fullName" formControlName="fullName" placeholder="Tu nombre completo"
                        [class.invalid]="registerForm.get('fullName')?.invalid && (registerForm.get('fullName')?.dirty || registerForm.get('fullName')?.touched)" />
                </div>
                <div class="error"
                    *ngIf="registerForm.get('fullName')?.invalid && (registerForm.get('fullName')?.dirty || registerForm.get('fullName')?.touched)">
                    El nombre es obligatorio.
                </div>
            </div>
            <div class="form-group">
                <label for="email">Correo electrónico</label>
                <div class="input-icon-wrapper">
                    <i class="material-icons-outlined">email</i>
                    <input type="email" id="email" formControlName="email" placeholder="you@example.com"
                        [class.invalid]="registerForm.get('email')?.invalid && (registerForm.get('email')?.dirty || registerForm.get('email')?.touched)" />
                </div>
                <div class="error"
                    *ngIf="registerForm.get('email')?.invalid && (registerForm.get('email')?.dirty || registerForm.get('email')?.touched)">
                    <ng-container *ngIf="registerForm.get('email')?.hasError('required')">El email es
                        obligatorio.</ng-container>
                    <ng-container *ngIf="registerForm.get('email')?.hasError('email')">Introduce un email
                        válido.</ng-container>
                </div>
            </div>
            <div class="form-group">
                <label for="password">Contraseña</label>
                <div class="input-icon-wrapper">
                    <i class="material-icons-outlined">lock</i>
                    <input [type]="hidePassword ? 'password' : 'text'" id="password" formControlName="password"
                        placeholder="Tu contraseña"
                        [class.invalid]="registerForm.get('password')?.invalid && (registerForm.get('password')?.dirty || registerForm.get('password')?.touched)" />
                    <button type="button" (click)="hidePassword = !hidePassword"
                        aria-label="Mostrar/ocultar contraseña">
                        <i class="material-icons-outlined">{{ hidePassword ? 'visibility_off' : 'visibility' }}</i>
                    </button>
                </div>
                <div class="error"
                    *ngIf="registerForm.get('password')?.invalid && (registerForm.get('password')?.dirty || registerForm.get('password')?.touched)">
                    <ng-container *ngIf="registerForm.get('password')?.hasError('required')">La contraseña es
                        obligatoria.</ng-container>
                    <ng-container *ngIf="registerForm.get('password')?.hasError('minlength')">Mínimo 6
                        caracteres.</ng-container>
                </div>
            </div>
            <div class="form-group">
                <label for="confirmPassword">Confirmar contraseña</label>
                <div class="input-icon-wrapper">
                    <i class="material-icons-outlined">lock</i>
                    <input [type]="hideConfirmPassword ? 'password' : 'text'" id="confirmPassword"
                        formControlName="confirmPassword" placeholder="Repite tu contraseña"
                        [class.invalid]="registerForm.get('confirmPassword')?.invalid && (registerForm.get('confirmPassword')?.dirty || registerForm.get('confirmPassword')?.touched)" />
                    <button type="button" (click)="hideConfirmPassword = !hideConfirmPassword"
                        aria-label="Mostrar/ocultar contraseña">
                        <i class="material-icons-outlined">{{ hideConfirmPassword ? 'visibility_off' : 'visibility'
                            }}</i>
                    </button>
                </div>
                <div class="error"
                    *ngIf="registerForm.get('confirmPassword')?.invalid && (registerForm.get('confirmPassword')?.dirty || registerForm.get('confirmPassword')?.touched)">
                    Las contraseñas deben coincidir.
                </div>
            </div>
            <div class="form-group checkbox-group">
                <label>
                    <input type="checkbox" formControlName="terms" />
                    Acepto los <a routerLink="/terminos" target="_blank">Términos y condiciones</a> y la <a
                        routerLink="/privacidad" target="_blank">Política de privacidad</a>.
                </label>
                <div class="error" *ngIf="registerForm.get('terms')?.invalid && registerForm.get('terms')?.touched">
                    Debes aceptar los términos para registrarte.
                </div>
            </div>
            <div class="form-group checkbox-group">
                <label>
                    <input type="checkbox" formControlName="newsletter" />
                    Quiero recibir novedades y actualizaciones de Autonaxe.
                </label>
            </div>
            <button type="submit" class="btn btn--primary" [disabled]="registerForm.invalid">
                Registrarse gratis
            </button>
        </form>
        <p class="register-link">
            ¿Ya tienes cuenta? <a routerLink="/auth/login">Iniciar sesión</a>
        </p>
        <p class="back-home">
            <a routerLink="/">← Volver al inicio</a>
        </p>
    </div>
</section>